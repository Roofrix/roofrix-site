import{a as E,b as y,c as S,f as k}from"./chunk-FTFMUACC.js";import{d as O,e as v}from"./chunk-6VCXNJ72.js";import{a as F,b as D,c as l,d as I,e as T,g as U,i as V,j as q,n as z,p as A}from"./chunk-QESJGVXS.js";import{h as M,k as b}from"./chunk-BDAGTHR3.js";import{Ga as w,La as c,P as u,Sa as p,Ta as r,Ua as a,Va as m,ab as f,ba as x,cb as d,hb as h,ib as P,jb as s,lb as g,ua as o,yb as C}from"./chunk-U4S3JRSN.js";function G(i,n){if(i&1&&(r(0,"div",24),s(1),a()),i&2){let e=d();o(),g(" ",e.errorMessage," ")}}function R(i,n){if(i&1&&(r(0,"span",25),s(1),a()),i&2){let e=d();o(),g(" ",e.getErrorMessage("email")," ")}}function Z(i,n){if(i&1&&(r(0,"div",26)(1,"div",27),m(2,"div",28),a(),r(3,"span",29),s(4),a()()),i&2){let e=d();o(2),P(e.getPasswordStrengthClass()),o(),P(e.getPasswordStrengthClass()),o(),g(" ",e.getPasswordStrengthText()," ")}}function j(i,n){if(i&1&&(r(0,"span",25),s(1),a()),i&2){let e=d();o(),g(" ",e.getErrorMessage("password")," ")}}function L(i,n){if(i&1&&(r(0,"span",25),s(1),a()),i&2){let e=d();o(),g(" ",e.getErrorMessage("confirmPassword")," ")}}function Y(i,n){if(i&1&&(r(0,"span",25),s(1),a()),i&2){let e=d();o(),g(" ",e.getErrorMessage("acceptTerms")," ")}}function B(i,n){i&1&&(r(0,"span"),s(1,"Create Account"),a())}function $(i,n){i&1&&(r(0,"span"),s(1,"Creating Account..."),a())}var N=class i{fb=u(z);authService=u(k);router=u(O);cdr=u(C);ngZone=u(x);signUpForm;loading=!1;errorMessage="";showPassword=!1;showConfirmPassword=!1;passwordValidation=null;ngOnInit(){this.signUpForm=this.fb.group({email:["",[l.required,l.email]],password:["",[l.required,l.minLength(8),y()]],confirmPassword:["",[l.required,S("password")]],acceptTerms:[!1,[l.requiredTrue]]}),this.signUpForm.get("password")?.valueChanges.subscribe(n=>{n?this.passwordValidation=E(n):this.passwordValidation=null})}togglePasswordVisibility(n){n==="password"?this.showPassword=!this.showPassword:this.showConfirmPassword=!this.showConfirmPassword}getPasswordStrengthClass(){return this.passwordValidation?`strength-${this.passwordValidation.strength}`:""}getPasswordStrengthText(){if(!this.passwordValidation)return"";let n=this.passwordValidation.strength;return n.charAt(0).toUpperCase()+n.slice(1)}onSubmit(){if(this.signUpForm.invalid){this.markFormGroupTouched(this.signUpForm);return}this.loading=!0,this.errorMessage="";let{email:n,password:e}=this.signUpForm.value;this.authService.signUp(n,e).subscribe({next:t=>{t.success?this.router.navigate(["/dashboard/customer/new-order"]):this.ngZone.run(()=>{this.errorMessage=t.error||"Sign up failed. Please try again.",this.loading=!1,console.log("Error message set:",this.errorMessage)})},error:()=>{this.ngZone.run(()=>{this.errorMessage="An unexpected error occurred. Please try again.",this.loading=!1,console.log("Error occurred, message set:",this.errorMessage)})}})}markFormGroupTouched(n){Object.keys(n.controls).forEach(e=>{n.get(e)?.markAsTouched()})}hasError(n,e){let t=this.signUpForm.get(n);return!!(t&&t.hasError(e)&&t.touched)}getErrorMessage(n){let e=this.signUpForm.get(n);if(!e||!e.touched)return"";if(n==="email"){if(e.hasError("required"))return"Email is required";if(e.hasError("email"))return"Please enter a valid email address"}if(n==="password"){if(e.hasError("required"))return"Password is required";if(e.hasError("minlength"))return"Password must be at least 8 characters";if(e.hasError("passwordStrength")&&this.passwordValidation)return this.passwordValidation.errors[0]}if(n==="confirmPassword"){if(e.hasError("required"))return"Please confirm your password";if(e.hasError("passwordMismatch"))return"Passwords do not match"}return n==="acceptTerms"&&e.hasError("required")?"You must accept the terms and conditions":""}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=w({type:i,selectors:[["app-signup"]],decls:46,vars:22,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-form",3,"ngSubmit","formGroup"],["class","error-alert",4,"ngIf"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","you@example.com","autocomplete","email"],["class","error-message",4,"ngIf"],["for","password"],[1,"password-input-wrapper"],["id","password","formControlName","password","placeholder","Create a strong password","autocomplete","new-password",3,"type"],["type","button","tabindex","-1",1,"password-toggle",3,"click"],["class","password-strength",4,"ngIf"],["for","confirmPassword"],["id","confirmPassword","formControlName","confirmPassword","placeholder","Re-enter your password","autocomplete","new-password",3,"type"],[1,"form-group","checkbox-group"],[1,"checkbox-label"],["type","checkbox","formControlName","acceptTerms"],["href","#","target","_blank"],["type","submit",1,"submit-button",3,"disabled"],[4,"ngIf"],[1,"auth-link"],["routerLink","/signin"],[1,"error-alert"],[1,"error-message"],[1,"password-strength"],[1,"strength-bar"],[1,"strength-fill"],[1,"strength-text"]],template:function(e,t){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),s(4,"Create Account"),a(),r(5,"p"),s(6,"Sign up to get started with Roofrix"),a()(),r(7,"form",3),f("ngSubmit",function(){return t.onSubmit()}),c(8,G,2,1,"div",4),r(9,"div",5)(10,"label",6),s(11,"Email Address"),a(),m(12,"input",7),c(13,R,2,1,"span",8),a(),r(14,"div",5)(15,"label",9),s(16,"Password"),a(),r(17,"div",10),m(18,"input",11),r(19,"button",12),f("click",function(){return t.togglePasswordVisibility("password")}),s(20),a()(),c(21,Z,5,5,"div",13)(22,j,2,1,"span",8),a(),r(23,"div",5)(24,"label",14),s(25,"Confirm Password"),a(),r(26,"div",10),m(27,"input",15),r(28,"button",12),f("click",function(){return t.togglePasswordVisibility("confirmPassword")}),s(29),a()(),c(30,L,2,1,"span",8),a(),r(31,"div",16)(32,"label",17),m(33,"input",18),r(34,"span"),s(35,"I accept the "),r(36,"a",19),s(37,"Terms and Conditions"),a()()(),c(38,Y,2,1,"span",8),a(),r(39,"button",20),c(40,B,2,0,"span",21)(41,$,2,0,"span",21),a(),r(42,"div",22),s(43," Already have an account? "),r(44,"a",23),s(45,"Sign In"),a()()()()()),e&2&&(o(7),p("formGroup",t.signUpForm),o(),p("ngIf",t.errorMessage),o(4),h("error",t.hasError("email","required")||t.hasError("email","email")),o(),p("ngIf",t.getErrorMessage("email")),o(5),h("error",t.hasError("password","required")||t.hasError("password","minlength")||t.hasError("password","passwordStrength")),p("type",t.showPassword?"text":"password"),o(2),g(" ",t.showPassword?"\u{1F441}\uFE0F":"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F"," "),o(),p("ngIf",t.passwordValidation),o(),p("ngIf",t.getErrorMessage("password")),o(5),h("error",t.hasError("confirmPassword","required")||t.hasError("confirmPassword","passwordMismatch")),p("type",t.showConfirmPassword?"text":"password"),o(2),g(" ",t.showConfirmPassword?"\u{1F441}\uFE0F":"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F"," "),o(),p("ngIf",t.getErrorMessage("confirmPassword")),o(3),h("error",t.hasError("acceptTerms","required")),o(5),p("ngIf",t.getErrorMessage("acceptTerms")),o(),p("disabled",t.loading),o(),p("ngIf",!t.loading),o(),p("ngIf",t.loading))},dependencies:[b,M,A,U,D,F,I,T,q,V,v],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:calc(100vh - 140px);padding:40px 20px}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:440px;background:#fff;border-radius:16px;padding:40px;box-shadow:0 4px 20px #0f172a14}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:800;color:#0f172a;margin:0 0 8px}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;color:#64748b;margin:0}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.error-alert[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;background:#fef2f2;border:1px solid #fecaca;color:#991b1b;padding:14px 16px;border-radius:8px;font-size:14px;line-height:1.5}.error-alert[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;margin-top:2px;color:#dc2626}.error-alert[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#1e293b}.form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{height:48px;padding:0 16px;border:1px solid #cbd5e1;border-radius:8px;font-size:15px;color:#0f172a;transition:all .2s ease}.form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]::placeholder{color:#94a3b8}.form-group[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-group[_ngcontent-%COMP%]   input[type=email].error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=password].error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   input[type=text].error[_ngcontent-%COMP%]{border-color:#ef4444}.form-group[_ngcontent-%COMP%]   input[type=email].error[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=password].error[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   input[type=text].error[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #ef44441a}.form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:13px;color:#ef4444;font-weight:500}.password-input-wrapper[_ngcontent-%COMP%]{position:relative}.password-input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:48px}.password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:18px;padding:4px;line-height:1;opacity:.6;transition:opacity .2s ease}.password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:hover{opacity:1}.password-input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:focus{outline:none}.password-strength[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-top:4px}.password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]{flex:1;height:4px;background:#e2e8f0;border-radius:2px;overflow:hidden}.password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill[_ngcontent-%COMP%]{height:100%;transition:all .3s ease;border-radius:2px}.password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill.strength-weak[_ngcontent-%COMP%]{width:33%;background:#ef4444}.password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill.strength-medium[_ngcontent-%COMP%]{width:66%;background:#f59e0b}.password-strength[_ngcontent-%COMP%]   .strength-bar[_ngcontent-%COMP%]   .strength-fill.strength-strong[_ngcontent-%COMP%]{width:100%;background:#10b981}.password-strength[_ngcontent-%COMP%]   .strength-text[_ngcontent-%COMP%]{font-size:12px;font-weight:600;min-width:60px}.password-strength[_ngcontent-%COMP%]   .strength-text.strength-weak[_ngcontent-%COMP%]{color:#ef4444}.password-strength[_ngcontent-%COMP%]   .strength-text.strength-medium[_ngcontent-%COMP%]{color:#f59e0b}.password-strength[_ngcontent-%COMP%]   .strength-text.strength-strong[_ngcontent-%COMP%]{color:#10b981}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:14px;color:#475569;cursor:pointer}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:18px;height:18px;cursor:pointer;accent-color:#3b82f6}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   input[type=checkbox].error[_ngcontent-%COMP%]{outline:1px solid #ef4444}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:none}.checkbox-group[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.submit-button[_ngcontent-%COMP%]{width:100%;height:48px;background:#3b82f6;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;box-shadow:0 4px 14px #3b82f666;transition:all .3s ease;margin-top:8px}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb;transform:translateY(-2px);box-shadow:0 6px 20px #3b82f680}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.submit-button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #3b82f64d}.auth-link[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#64748b;margin-top:8px}.auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;font-weight:600;text-decoration:none;transition:color .2s ease}.auth-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#2563eb;text-decoration:underline}@media(max-width:768px){.auth-container[_ngcontent-%COMP%]{padding:20px}.auth-card[_ngcontent-%COMP%]{padding:32px 24px}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}}"]})};export{N as SignUp};
