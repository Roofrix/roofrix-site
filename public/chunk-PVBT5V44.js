import{a as G}from"./chunk-GWCAXF66.js";import{f as $}from"./chunk-FTFMUACC.js";import{d as z}from"./chunk-6VCXNJ72.js";import{f as T,g as D,h as V,i as N,j,k as L}from"./chunk-BDAGTHR3.js";import{$a as C,Ga as w,La as g,P as u,Sa as s,Ta as t,U as b,Ua as i,V as x,Va as l,W as m,X as _,Za as S,_a as I,ab as v,cb as c,hb as k,jb as a,kb as p,lb as O,mb as E,sb as h,tb as y,ua as o,w as M,z as P}from"./chunk-U4S3JRSN.js";function B(n,r){n&1&&(t(0,"div",12),l(1,"div",13),t(2,"p"),a(3,"Loading your orders..."),i()())}function F(n,r){if(n&1&&(t(0,"div",14),m(),t(1,"svg",15),l(2,"circle",6)(3,"line",16)(4,"line",17),i(),_(),t(5,"p"),a(6),i()()),n&2){let e=c();o(6),p(e.error)}}function U(n,r){if(n&1){let e=C();t(0,"div",22),m(),t(1,"svg",23),l(2,"path",24),i(),_(),t(3,"h3"),a(4,"No orders yet"),i(),t(5,"p"),a(6,"Start by creating your first rooftop design order"),i(),t(7,"button",4),v("click",function(){b(e);let f=c(3);return x(f.createNewOrder())}),a(8,"Create Order"),i()()}}function Y(n,r){if(n&1&&(t(0,"div",35),m(),t(1,"svg",36),l(2,"path",45)(3,"circle",46),i(),_(),t(4,"span"),a(5),i()()),n&2){let e=c().$implicit;o(5),p(e.assignedDesignerEmail)}}function R(n,r){if(n&1&&(t(0,"div",35),m(),t(1,"svg",36),l(2,"circle",6)(3,"line",47)(4,"line",48),i(),_(),t(5,"span",49),a(6),h(7,"titlecase"),i()()),n&2){let e=c().$implicit;o(5),k("high",e.priority==="high")("medium",e.priority==="medium"),o(),O(" ",y(7,5,e.priority)," Priority ")}}function q(n,r){if(n&1&&(t(0,"div",50)(1,"div",51),m(),t(2,"svg",36),l(3,"rect",52)(4,"circle",53)(5,"polyline",54),i(),a(6),i()()),n&2){let e=c().$implicit;o(6),E(" ",e.siteImages.length," image",e.siteImages.length!==1?"s":""," ")}}function J(n,r){if(n&1){let e=C();t(0,"div",27),v("click",function(){let f=b(e).$implicit,A=c(4);return x(A.viewOrderDetails(f.id))}),t(1,"div",28)(2,"div",29),a(3),i(),t(4,"span",30),a(5),i()(),t(6,"div",31)(7,"h3",32),a(8),i(),t(9,"p",33),a(10),i(),t(11,"div",34)(12,"div",35),m(),t(13,"svg",36),l(14,"rect",37)(15,"line",38)(16,"line",39)(17,"line",40),i(),_(),t(18,"span"),a(19),i()(),g(20,Y,6,1,"div",41)(21,R,8,7,"div",41),i(),g(22,q,7,2,"div",42),i(),t(23,"div",43)(24,"button",44),a(25,"View Details"),i()()()}if(n&2){let e=r.$implicit,d=c(4);o(3),p(e.orderNumber),o(),s("ngClass",d.getStatusClass(e.status)),o(),O(" ",d.getStatusLabel(e.status)," "),o(3),p(e.projectName),o(2),p(e.projectAddress),o(9),p(d.formatDate(e.createdAt)),o(),s("ngIf",e.assignedDesignerEmail),o(),s("ngIf",e.priority),o(),s("ngIf",e.siteImages&&e.siteImages.length>0)}}function K(n,r){if(n&1&&(t(0,"div",25),g(1,J,26,9,"div",26),i()),n&2){let e=c().ngIf;o(),s("ngForOf",e)}}function Q(n,r){if(n&1&&(S(0),g(1,U,9,0,"div",20)(2,K,2,1,"div",21),I()),n&2){let e=r.ngIf;o(),s("ngIf",e.length===0),o(),s("ngIf",e.length>0)}}function W(n,r){if(n&1&&(t(0,"div",18),g(1,Q,3,2,"ng-container",19),h(2,"async"),i()),n&2){let e=c();o(),s("ngIf",y(2,1,e.orders$))}}var H=class n{authService=u($);orderService=u(G);router=u(z);authSubscription=null;orders$=null;loading=!0;error="";ngOnInit(){this.loadOrders()}ngOnDestroy(){this.authSubscription&&this.authSubscription.unsubscribe()}loadOrders(){this.authSubscription=this.authService.loading$.pipe(M(r=>!r),P(1)).subscribe(()=>{let r=this.authService.getCurrentUser();if(!r?.uid){this.error="User not authenticated",this.loading=!1;return}this.orders$=this.orderService.customerOrdersListener(r.uid),this.loading=!1})}getStatusClass(r){return{pending:"status-pending",in_progress:"status-in-progress",review:"status-review",completed:"status-completed",cancelled:"status-cancelled"}[r]||"status-pending"}getStatusLabel(r){return{pending:"Pending",in_progress:"In Progress",review:"Under Review",completed:"Completed",cancelled:"Cancelled"}[r]||r}formatDate(r){if(!r)return"N/A";try{let e=r.toDate?r.toDate():new Date(r);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(e)}catch{return"N/A"}}viewOrderDetails(r){this.router.navigate(["/dashboard/customer/orders",r])}createNewOrder(){this.router.navigate(["/dashboard/customer/orders/products"])}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-customer-orders"]],decls:16,vars:3,consts:[[1,"orders-page"],[1,"page-header"],[1,"page-title"],[1,"page-subtitle"],[1,"btn-primary",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","16"],["x1","8","y1","12","x2","16","y2","12"],["class","loading-container",4,"ngIf"],["class","error-message",4,"ngIf"],["class","orders-container",4,"ngIf"],[1,"loading-container"],[1,"spinner"],[1,"error-message"],["width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"orders-container"],[4,"ngIf"],["class","empty-state",4,"ngIf"],["class","orders-grid",4,"ngIf"],[1,"empty-state"],["width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1.5"],["d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"orders-grid"],["class","order-card",3,"click",4,"ngFor","ngForOf"],[1,"order-card",3,"click"],[1,"order-header"],[1,"order-number"],[1,"status-badge",3,"ngClass"],[1,"order-body"],[1,"project-name"],[1,"project-address"],[1,"order-meta"],[1,"meta-item"],["width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],["class","meta-item",4,"ngIf"],["class","order-images",4,"ngIf"],[1,"order-footer"],[1,"btn-view"],["d","M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"],["cx","12","cy","7","r","4"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"priority"],[1,"order-images"],[1,"image-count"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["cx","8.5","cy","8.5","r","1.5"],["points","21 15 16 10 5 21"]],template:function(e,d){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),a(4,"My Orders"),i(),t(5,"p",3),a(6,"View and track your rooftop design orders"),i()(),t(7,"button",4),v("click",function(){return d.createNewOrder()}),m(),t(8,"svg",5),l(9,"circle",6)(10,"line",7)(11,"line",8),i(),a(12," New Order "),i()(),g(13,B,4,0,"div",9)(14,F,7,1,"div",10)(15,W,3,3,"div",11),i()),e&2&&(o(13),s("ngIf",d.loading),o(),s("ngIf",d.error&&!d.loading),o(),s("ngIf",!d.loading&&!d.error))},dependencies:[L,T,D,V,N,j],styles:[".orders-page[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem;gap:1rem}@media(max-width:768px){.page-header[_ngcontent-%COMP%]{flex-direction:column}}.page-header[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:700;color:#1e293b;margin:0 0 .5rem}.page-header[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{color:#64748b;margin:0}.page-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;border-radius:.5rem;font-weight:600;cursor:pointer;transition:all .2s;white-space:nowrap}.page-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}@media(max-width:768px){.page-header[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{width:100%;justify-content:center}}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;color:#64748b}.loading-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:3px solid #e5e7eb;border-top-color:#3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:1rem 1.5rem;background-color:#fef2f2;border:1px solid #fecaca;border-radius:.5rem;color:#dc2626}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center;background:#fff;border-radius:1rem;border:2px dashed #e5e7eb}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#cbd5e1;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1e293b;margin:0 0 .5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b;margin:0 0 1.5rem}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;border:none;border-radius:.5rem;font-weight:600;cursor:pointer;transition:all .2s}.empty-state[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #3b82f64d}.orders-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}@media(max-width:768px){.orders-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.order-card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;border:1px solid #e5e7eb;overflow:hidden;transition:all .2s;cursor:pointer}.order-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a;transform:translateY(-2px)}.order-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.25rem;border-bottom:1px solid #f1f5f9}.order-header[_ngcontent-%COMP%]   .order-number[_ngcontent-%COMP%]{font-weight:600;color:#1e293b;font-size:.875rem}.status-badge[_ngcontent-%COMP%]{padding:.375rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-badge.status-pending[_ngcontent-%COMP%]{background-color:#fef3c7;color:#92400e}.status-badge.status-in-progress[_ngcontent-%COMP%]{background-color:#dbeafe;color:#1e40af}.status-badge.status-review[_ngcontent-%COMP%]{background-color:#e0e7ff;color:#4338ca}.status-badge.status-completed[_ngcontent-%COMP%]{background-color:#d1fae5;color:#065f46}.status-badge.status-cancelled[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}.order-body[_ngcontent-%COMP%]{padding:1.25rem}.order-body[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:#1e293b;margin:0 0 .5rem}.order-body[_ngcontent-%COMP%]   .project-address[_ngcontent-%COMP%]{color:#64748b;font-size:.875rem;margin:0 0 1rem;display:flex;align-items:center;gap:.5rem}.order-body[_ngcontent-%COMP%]   .order-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem}.order-body[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#64748b;font-size:.875rem}.order-body[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{flex-shrink:0;color:#94a3b8}.order-body[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   .priority.high[_ngcontent-%COMP%]{color:#dc2626;font-weight:600}.order-body[_ngcontent-%COMP%]   .meta-item[_ngcontent-%COMP%]   .priority.medium[_ngcontent-%COMP%]{color:#f59e0b;font-weight:600}.order-body[_ngcontent-%COMP%]   .order-images[_ngcontent-%COMP%]{margin-top:1rem}.order-body[_ngcontent-%COMP%]   .order-images[_ngcontent-%COMP%]   .image-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#64748b;font-size:.875rem}.order-body[_ngcontent-%COMP%]   .order-images[_ngcontent-%COMP%]   .image-count[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#94a3b8}.order-footer[_ngcontent-%COMP%]{padding:1rem 1.25rem;background-color:#f9fafb;border-top:1px solid #f1f5f9}.order-footer[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]{width:100%;padding:.625rem;background:#fff;border:1px solid #e5e7eb;border-radius:.375rem;color:#3b82f6;font-weight:600;font-size:.875rem;cursor:pointer;transition:all .2s}.order-footer[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]:hover{background-color:#f9fafb;border-color:#3b82f6}"]})};export{H as CustomerOrders};
